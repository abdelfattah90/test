import 'package:flutter/material.dart';
import '../../utilities/utilities.dart';

String p1 =
    'صدق الله ومن أصدق من الله قيلاً، صدق الله العظيم، الغفور الرحيم، العزيز الجبار، الذي خضعت لعظمته الرّقاب، وذلّت لجبروته الصّعاب، ولانت لقدرته الشّدائد الصلاب، ربّ الأرباب ومسبّب الأسباب، ومنزّل الكتاب، وخالق خلقه من تراب، غافر الذّنب، وقابل التوبة شديد العقاب، ذو الطول لا إله إلا هو عليه توكّلت وإليه المتاب.';

String p2 =
    'اللهم ارحمني بالقرآن، واجعله لي إماماً ونوراً وهدىً ورحمة، اللهمّ ذكّرني منه  مَا نسِيت، وعلمني منه ما جهلت، وارزقني تلاوته آناء الليل وأطراف النهار، واجعله لي حجةً يا رب العالمين.';
String p3 =
    'اللهمّ أصلح لي ديني الذي هو عصمة أمري، وأصلح لي دنياي التي فيها معاشي، وأصلح لي آخرتي التي فيها معادي، واجعل الحياة زيادة لي في كلّ خير، واجعل الموت راحة لي من كل شر اجعل خير عمري آخره، وخير عملي خواتمه، وخير أيامي يوم ألقاك فيه يا رب العالمين.';
String p4 =
    'اللهم إني عبدُك ابن عبدِك ابنُ أمتِك ناصيتي بيدِك ماضٍ فيَّ حُكمك عَدل فيَّ قضاؤك أسألك بكل اسمٍ هو لك سميت به نفسك أو علمته أحدًا مِن خلقِك أو أنزلته في كتابك أو استأثرت به في علمِ الغيب عندَك أن تجعلَ القرآن ربيع قلبي ونورَ صدري وجلاءَ حُزني وذهابَ همّي.';
String p5 =
    'اللهمّ إنّي أسألك عيشةً هنيّةً وميتة سوية ومراداً غير مخزٍ ولا فاضح، اللهمّ إنّي أسألك خير المسألة وخير الدعاء وخير النّجاح وخير العلم وخير العمل وخير الثّواب وخير الحياة وخير الممات، وثبتني وثقل موازيني وحقق أمانيي وارفع درجاتي، وتقبل صلاتي واغفر لي خطيئاتي، وأسألك العلا من الجنة.';
String p6 =
    'اللهمّ إنّي أسألك موجبات رحمتك وعزائم مغفرتك، والسلامة من كلّ إثمٍ والغنيمة من كلّ برٍّ، والفوز بالجنة والنجاة من النار.';
String p7 =
    'اللهمّ أحسن عاقبتنا في الأمور كلّها، وأجرنا من خزي الدّنيا وعذاب الآخرة.';

String p8 =
    'اللهم اقسم لنا من خشيتك ما تحول به بيننا وبين معصيتك، ومن طاعتك ما تبلّغنا بها جنتك، ومن اليقين ما تهون به علينا من مصائب الدنيا، ومتعنا الله بأسماعنا وأبصارنا وقوتنا ما أحييتنا، واجعله الوارث منّا، واجعل ثأرنا على من ظلمنا، وانصرنا على من عادانا، ولا تجعل مصيبتنا في ديننا، ولا تجعل الدنيا أكبر همّنا ولا مبلغ علمنا، ولا تسلط علينا من لا يرحمنا.';

String p9 =
    'اللهمّ لا تجعل لنا ذنباً إلا غفرته ولا همّاً إلا فرجته ولا دَيناً إلا قضيته ولا مريضاً إلا شفيته ولا عدوّاً إلا كفيته ولا غائباً إلا رددته، ولا عاصياً إلا عصمته ولا فاسداً إلا أصلحته ولا ميّتاً إلا رحمته، ولا عيباً إلا سترته ولا عسيراً إلا يسّرته، ولا حاجةً من حوائج الدنيا والآخرة لك فيها رضاً ولنا فيها صلاح إلّا أعنتنا على قضائها في يسر منك وعافية برحمتك يا أرحم الرّاحمين.';

String p10 =
    'اللهمّ افتح لنا بخير واجعل عواقب أمورنا إلى خير، اللهمّ إنّا نعوذ بك من فواتح الشرّ وخواتمه وأوّله وآخره وباطنه وظاهره، وعلّمنا ما ينفعنا وانفعنا بما علمتنا.';

String p11 =
    'اللهمّ لا تجعل بيننا وبينك في رزقنا أحداً سواك، واجعلنا أغنى خلقك بك وأفقر عبادك إليك، وهب لنا غنىً لا يطغينا وصحّةً لا تلهينا وأغننا عمّن أغنيته عنّا، واجعل آخر كلامنا شهادة أن لا إله إلا الله وأنّ محمداً رسول الله، وتوفّنا وأنت راضٍ عنّا غير غضبان، واجعلنا في موقف القيامة من الذين لا خوف عليهم ولا هم يحزنون برحمتك يا أرحم الرّاحمين.';

String p12 =
    'اللهمّ إنّا نعوذ بك من فتنة النار وعذاب النار، ونعوذ بك من فتنة القبر وعذاب القبر.';

String p13 =
    'اللهمّ ألّف بين قلوبنا وأصلح ذات بيننا، واهدنا سبل السلام، ونجّنا من الظّلمات إلى النور، وجنّبنا الفواحش ما ظهر منها وما بطن، وبارك لنا في أعمالنا وأعمارنا وأزواجنا وذريّاتنا وأوقاتنا وأموالنا، واجعلنا مباركين أينما كنّا.';

String p14 =
    'اللّهمّ إنا نَسألك مُوجباتِ رَحمتك، وعزائِم مَغفرتك، والسلامة مِن كل إثمٍ، والغنيمة مِن كل بِر، والفوز بالجنةِ، والنجاة مِن النارِ.';

String p15 =
    'اللهمّ إنّا نسألك نعيماً لا يبيد وقرّة عين لا تنفد، ونسألك لذّة النظر إلى وجهك الكريم والشّوق إلى لقائك، في غير ضرّاءٍ مضرّة ولا فتنة مضلّة، ونسألك مرافقة النبيّ محمد صلّى الله عليه وسلم في أعلى الجنّة جنّة الخلد يا أرحم الرّاحمين.';

String p16 =
    'اللهمّ أعنّا ولا تعن علينا، وانصرنا ولا تنصر علينا، وامكر لنا ولا تمكر علينا، واهدنا ويسّر الهدى لنا، وانصرنا على من بغى علينا، واجعلنا لك شاكرين لك ذاكرين لك مخبتين لك أوّاهين منيبين، اللهمّ تقبّل توبتنا واغسل حوبتنا وثبّت حجّتنا وسدّد ألسنتنا، وطهّر قلوبنا من النّفاق وأعمالنا من الرّياء وألسننا من الكذب وأعيننا من الخيانة، إنّك تعلم خائنة الأعين وما تخفي الصدور.';

String p17 =
    'اللهمّ إنّا نعوذ بك من جهد البلاء ودرك الشّقاء وسوء القضاء وشماتة الأعداء.';

String p18 =
    'اللهمّ فارج الهمّ كاشف الغمّ مجيب دعوة المضطرين، رحمن الدّنيا والآخرة ورحيمهما، ارحمنا رحمة تغنينا بها عن رحمة من سواك.';

String p19 = 'اللهمّ إنّك عفوٌّ تحبّ العفو فاعفُ عنّا.';

String p20 =
    'اللهمّ لا تدع لنا ذنباً إلا غفرته ولا همّاً إلّا فرّجته، ولا دَيناً إلا قضيته، ولا حاجةً من حوائج الدنيا والآخرة هى لك رضىً إلّا قضيتها يا أرحم الراحمين، رّبنا آتنا في الدّنيا حسنة، وفي الآخرة حسنة، وقِنا عذاب النّار، وصلِّ الله على نبيّنا محمّد وعلى آله وأصحابه الأخيار، وسلّم تسليماً كثيراً والحمد لله ربّ العالمين.';

class DuaQuran extends StatefulWidget {
  const DuaQuran({super.key});

  @override
  State<DuaQuran> createState() => _DuaQuranState();
}

class _DuaQuranState extends State<DuaQuran> {
  final PreferencesManager _preferencesManager = PreferencesManager();

  @override
  void initState() {
    super.initState();

    _loadPreferences();
  }

  Future<void> _loadPreferences() async {
    await _preferencesManager.loadTheme();
    await _preferencesManager.loadFontSize();
    setState(() {});
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: PreferredSize(
        preferredSize: const Size.fromHeight(40.0),
        child: AppBar(
          leading: BackButton(
            color: const Color(0xFFFFFFFF),
            onPressed: () {
              Navigator.pop(context);
            },
          ),
          title: const Padding(
            padding: EdgeInsets.only(top: 6),
            child: Text(
              'دعــاء ختـم القــرآن',
              style: TextStyle(
                fontSize: 16.0,
                fontFamily: 'swissr',
                fontWeight: FontWeight.bold,
                color: Colors.white,
              ),
            ),
          ),
          centerTitle: true,
          flexibleSpace: Container(
            decoration: const BoxDecoration(
              gradient: LinearGradient(
                colors: [
                  Color(0xFF353535),
                  Color(0xFF353535),
                  Color(0xFF353535)
                ],
                begin: Alignment.topCenter,
                end: Alignment.bottomCenter,
              ),
            ),
          ),
          foregroundColor: const Color(0xFFFFFFFF),
          actions: [
            IconButton(
              onPressed: () {},
              icon: Image.asset(
                'assets/images/dua_quran.png',
                height: 25.0,
                width: 25.0,
              ),
            )
          ],
        ),
      ),
      body: NotificationListener<ScrollNotification>(
        child: Stack(children: [
          ScrollbarTheme(
            data: ScrollbarThemeData(
              interactive: true,
              thumbColor: MaterialStateProperty.all<Color>(
                _preferencesManager.isDarkMode
                    ? const Color(0xACBBBBBB)
                    : const Color(0x3CBBBBBB),
              ),
              radius: const Radius.circular(2),
              thickness: MaterialStateProperty.all<double>(7),
            ),
            child: Scrollbar(
              thumbVisibility: true,
              child: Container(
                height: MediaQuery.of(context).size.height,
                padding: const EdgeInsets.symmetric(horizontal: 20),
                color: _preferencesManager.isDarkMode
                    ? const Color(0xFFECECEC)
                    : const Color(0xFF1B1B1B),
                child: SingleChildScrollView(
                  child: Directionality(
                    textDirection: TextDirection.rtl,
                    child: Column(
                      children: [
                        const SizedBox(height: 20),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p1,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p2,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p3,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p4,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p5,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p6,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p7,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p8,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p9,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p10,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p11,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p12,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p13,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p14,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p15,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p16,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p17,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p18,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p19,
                        ),
                        DuaText(
                          preferencesManager: _preferencesManager,
                          content: p20,
                        ),
                        const SizedBox(height: 40),
                      ],
                    ),
                  ),
                ),
              ),
            ),
          )
        ]),
      ),
    );
  }
}

class DuaText extends StatelessWidget {
  const DuaText({
    super.key,
    required PreferencesManager preferencesManager,
    required this.content,
  }) : _preferencesManager = preferencesManager;

  final String content;
  final PreferencesManager _preferencesManager;

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(5),
      decoration: BoxDecoration(
        color: _preferencesManager.isDarkMode
            ? Colors.white
            : colorParagraphContentDark,
      ),
      child: paragraphContent(content,
          isDarkMode: _preferencesManager.isDarkMode,
          fontSize: _preferencesManager.fontSize),
    );
  }
}
