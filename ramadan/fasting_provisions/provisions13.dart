import 'package:flutter/material.dart';
import '../../utilities/utilities.dart';

String p1 =
    'الإعتكاف :هو الإقامة في المسجد بنية التقرُّب إلى الله عز وجل، ليلاً كان أو نهاراً  ، والاعتكاف سنةٌ للرجال - بالإجماع. وسنةٌ للنساء كالرجال - اتفاق المذاهب الفقهية الأربعة.';
String p2 =
    'يشترط لصحة الاعتكاف الإسلام و العقل و التمييز و النية ويصح الاعتكاف في غير المساجد الثلاثة، وهي المسجد الحرام، والمسجد النبوي، والمسجد الأقصى - اتفاق المذاهب الفقهية الأربعة.';
String p3 = 'يشترط لصحة الاعتكاف أن يكون في المسجد  - بالإجماع.';
String p4 =
    'يشترط لاعتكاف الزوجة أن يأذن لها زوجها - اتفاق المذاهب الفقهية الأربعة.';
String p5 =
    'إن كان يتخلل الاعتكاف صلاة جماعةٍ، فيشترط لصحته أن يكون في مسجد جماعة - ابن باز وابن عثيمين.';
String p6 =
    'يجوز الاعتكاف في غير مسجد الجمعة إن كان لا يتخلل الاعتكاف جمعة - اتفاق المذاهب الفقهية الأربعة.';
String p7 =
    'من وجبت عليه الجمعة، وكانت تتخلَّل اعتكافه، فإنه لا يشترط لصحة استمرار الاعتكاف أن يكون اعتكافه في الجامع – وعليه أن يخرج لحضور الجمعة ثم يرجع إلى المسجد الذي يعتكف فيه - ولكنَّ الأفضل أن يكون اعتكافه في المسجد الجامع - ابن باز وابن عثيمين.';
String p8 =
    'يصح صعود المعتكف إلى منارة المسجد إن كانت في المسجد أو بابها فيه  - الحنفية والشافعية والحنابلة.';
String p9 =
    'يصح خروج المعتكف إلى الرحبة إن كانت متصلة بالمسجد - ابن تيمية وابن القيم.';
String p10 = 'يصح الاعتكاف في سطح المسجد أو صعود المعتكف إليه - بالإجماع.';
String p11 =
    'لا يصح الاعتكاف ابتداءً إلا بطهارة المعتكف مما يوجب الغسل كجنابةٍ أو حيضٍ أو نفاس - اتفاق المذاهب الفقهية الأربعة.';
String p12 = 'يجوز الاعتكاف في رمضان وفي غيره - بالإجماع.';
String p13 =
    'يُستحَبُّ الإعتكاف في العشر الأواخر من رمضان - اتفاق المذاهب الفقهية الأربعة.';
String p14 =
    'من أراد الإعتكاف في العشر الأواخر من رمضان فإن اعتكافه يبدأ قبل غروب شمس ليلة إحدى وعشرين - اتفاق المذاهب الفقهية الأربعة.';
String p15 = 'عند ابن باز يبدأ الاعتكاف من بعد صلاة فجر اليوم الواحد والعشرين.';
String p16 =
    'ينتهي وقت الاعتكاف في أيام العشر الأواخر من بعد غروب شمس آخر يومٍ من رمضان - اتفاق المذاهب الفقهية الأربعة وابن عثيمين وابن باز.';
String p17 = 'يصح الاعتكاف من غير صومٍ - ابن باز وابن عثيمين.';
String p18 =
    'الخروج ببعض البدن من المسجد لا بأس به للمعتكف ولا يفسد الاعتكاف - اتفاق المذاهب الفقهية الأربعة.';
String p19 =
    'الخروج بجميع البدن من المسجد بغير عذرٍ يفسد الاعتكاف - اتفاق المذاهب الفقهية الألابعة ، وحكى ابن حزم الإجماع.';
String p20 =
    'الخروج لأمرٍ لا بد منه حساً أو شرعاً جائزٌ، كقضاء الحاجة والوضوء من الحدث وغير ذلك - بالإجماع.';
String p21 =
    'الجماع وإنزال المني عمداً يحرم على المعتكف ويفسد عليه الاعتكاف - بالإجماع.';
String p22 =
    'المعتكف إذا احتلم لا يفسد اعتكافه، وعليه أن يغتسل ويتم اعتكافه - اتفاق المذاهب الفقهية الأربعة.';
String p23 =
    'طروء الإغماء والجنون يقطع الاعتكاف فإن أفاق بنى على اعتكافه - المالكية والشافعية والحنابلة.';
String p24 =
    'المعاصي تجرح معنى الاعتكاف الذي يدور رحاه على الانقطاع إلى الله سبحانه وتعالى في بيتٍ من بيوته، لكن إن وقعت من المعتكف المعصية فإنها لا تفسد اعتكافه حتى لو كانت هذه المعصية من جنس الكبائر كالغيبة والنميمة ونحوهما - الحنفية والشافعية والحنابلة.';
String p25 =
    'من نذر الاعتكاف فإنه يلزمه الوفاء به - اتفاق المذاهب الفقهية الأربعة.';
String p26 =
    'من نذر الاعتكاف في أحد المساجد الثلاثة -المسجد الحرام ومسجد النبي صلى الله عليه وسلم والمسجد الأقصى- فعليه الوفاء بنذره  - المالكية والشافعية والحنابلة.';
String p27 =
    'من نذر الاعتكاف قبل أن يسلم فيجب الوفاء به بعد إسلامه  - ابن عثيمين.';
String p28 =
    'اليوم في النذر يبدأ من طلوع الفجر إلى غروب الشمس فلا يدخل فيه الليل - الحنفية والشافعية والحنابلة.';
String p29 =
    'المعتكف تطوعاً إذا أبطل اعتكافه بعد الشروع فيه، فإنه يستحب له القضاء ولا يلزمه - الشافعية والحنابلة وقول للحنفية.';
String p30 =
    'من نذر اعتكاف يومٍ أو عدة أيامٍ معينةٍ ففاتته أو بطل اعتكافه فيها بأحد مفسداته، فعليه قضاء اليوم أو الأيام التي فاتته، أو بطل اعتكافه فيها - اتفاق المذاهب الفقهية الأربعة.';
String p31 =
    'من مات وقد نذر قبل موته الاعتكاف فلم يعتكف يستحب لوليه أن يقضي هذا الاعتكاف عنه - الحنابلة وابن عثيمين.';
String p32 =
    'أفضل الاعتكاف زمناً هو في رمضان وآكده في العشر الأواخر منه - اتفاق المذاهب الفقهية الأربعة.';
String p33 =
    'أفضل الاعتكاف مكاناً هو المسجد الحرام ثم يليه المسجد النبوي ثم المسجد الأقصى، ثم المسجد الجامع - اتفاق المذاهب الفقهية الأربعة.';
String p34 =
    'يستحب للمعتكف أن يشتغل بالقرب والعبادات المختصة به كقراءة القرآن، والذكر، والصلاة في غير وقت النهي، وما أشبه ذلك - اتفاق المذاهب الفقهية الأربعة.';
String p35 =
    'كره بعض المالكية والحنابلة للمعتكف الاشتغال بتدريس العلم والمناظرة وكتابة الحديث ومجالسة العلماء ونحو ذلك من العبادات التي لا يختص نفعها به.';
String p36 =
    'قال ابن عثيمين رحمه الله: هو أفضل من أن يذهب إلى حلقات العلم اللهم إلا أن تكون هذه الحلقات نادرة لا تحصل له في غير هذا الوقت فربما نقول طلب العلم في هذه الحال أفضل من الإشتغال بالعبادات الخاصة فاحضرها لأن هذا لا يشغل عن مقصود الإعتكاف.';

class Provision13 extends StatefulWidget {
  const Provision13({super.key});

  @override
  State<Provision13> createState() => _Provision13State();
}

class _Provision13State extends State<Provision13> {
  final PreferencesManager _preferencesManager = PreferencesManager();

  @override
  void initState() {
    super.initState();

    _loadPreferences();
  }

  Future<void> _loadPreferences() async {
    await _preferencesManager.loadTheme();
    await _preferencesManager.loadFontSize();
    setState(() {});
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: PreferredSize(
        preferredSize: const Size.fromHeight(40.0),
        child: AppBar(
          leading: BackButton(
            color: const Color(0xFFFFFFFF),
            onPressed: () {
              Navigator.pop(context);
            },
          ),
          title: const Padding(
            padding: EdgeInsets.only(top: 6),
            child: Text(
              'الاعتكاف',
              style: TextStyle(
                fontSize: 16.0,
                fontFamily: 'swissr',
                fontWeight: FontWeight.bold,
                color: Colors.white,
              ),
            ),
          ),
          centerTitle: true,
          flexibleSpace: Container(
            decoration: const BoxDecoration(
              gradient: LinearGradient(
                colors: [
                  Color(0xFF353535),
                  Color(0xFF353535),
                  Color(0xFF353535)
                ],
                begin: Alignment.topCenter,
                end: Alignment.bottomCenter,
              ),
            ),
          ),
          foregroundColor: const Color(0xFFFFFFFF),
          actions: [
            IconButton(
              onPressed: () {},
              icon: Image.asset(
                'assets/images/ramadan/prayer-rug.png',
                height: 25.0,
                width: 25.0,
              ),
            )
          ],
        ),
      ),
      body: NotificationListener<ScrollNotification>(
        child: Stack(children: [
          ScrollbarTheme(
            data: ScrollbarThemeData(
              interactive: true,
              thumbColor: MaterialStateProperty.all<Color>(
                _preferencesManager.isDarkMode
                    ? const Color(0xACBBBBBB)
                    : const Color(0x3CBBBBBB),
              ),
              radius: const Radius.circular(2),
              thickness: MaterialStateProperty.all<double>(7),
            ),
            child: Scrollbar(
              thumbVisibility: true,
              child: Container(
                height: MediaQuery.of(context).size.height,
                padding: const EdgeInsets.symmetric(horizontal: 20),
                color: _preferencesManager.isDarkMode
                    ? const Color(0xFFECECEC)
                    : const Color(0xFF1B1B1B),
                child: SingleChildScrollView(
                  child: Directionality(
                    textDirection: TextDirection.rtl,
                    child: Column(
                      children: [
                        const SizedBox(height: 20),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p1,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p2,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p3,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p4,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p5,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p6,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p7,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p8,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p9,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p10,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p11,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p12,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p13,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p14,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p15,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p16,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p17,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p18,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p19,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p20,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p21,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p22,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p23,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p24,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p25,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p26,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p27,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p28,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p29,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p30,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p31,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p32,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p33,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p34,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p35,
                        ),
                        PrevisionText(
                          preferencesManager: _preferencesManager,
                          content: p36,
                        ),
                        const SizedBox(height: 40),
                      ],
                    ),
                  ),
                ),
              ),
            ),
          )
        ]),
      ),
    );
  }
}

class PrevisionText extends StatelessWidget {
  const PrevisionText({
    super.key,
    required PreferencesManager preferencesManager,
    required this.content,
  }) : _preferencesManager = preferencesManager;

  final String content;
  final PreferencesManager _preferencesManager;

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.only(
        top: 10,
        bottom: 0,
        right: 5,
        left: 5,
      ),
      margin: const EdgeInsets.only(bottom: 10),
      decoration: BoxDecoration(
        borderRadius: const BorderRadius.all(Radius.circular(15)),
        color: _preferencesManager.isDarkMode
            ? Colors.white
            : colorParagraphContentDark,
      ),
      child: paragraphContent(content,
          isDarkMode: _preferencesManager.isDarkMode,
          fontSize: _preferencesManager.fontSize),
    );
  }
}
